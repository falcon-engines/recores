{{ $titles  := .Title }}
{{ if .IsHome }}
    {{ $titles  = .Site.Title }}
{{ end }}

{{ $keyword := delimit .Keywords ", " }}

<!-- general metadata -->
<title>{{ $titles }}</title>
<meta charset="UTF-8">
<meta name="language" content="{{ site.Language.Lang }}">
<meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{if .IsPage}}{{ .Summary }}{{ else }}{{ with .Site.Params.description }}{{ . }}{{ end }}{{ end }}{{ end }}">
<meta name="keywords" content="{{ $keyword }}">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- opengragp metadata  -->
{{ template "_internal/opengraph.html" . }}


<!-- twitter cards  -->
{{ template "_internal/twitter_cards.html" . }}


<!-- scheme metadata  -->
{{ template "_internal/schema.html" . }}


<!-- redirect search page -->
{{ if and ( eq .Site.Params.searchs.status false ) ( eq .RelPermalink "/search/" ) }}
    {{ $redirect := print "0; url=" .Site.BaseURL "/404" }}
    <meta http-equiv="refresh" content="{{ $redirect }}" />
{{ end }}


<!-- alternative format -->
{{ range .AlternativeOutputFormats -}}
  <link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" href="{{ .RelPermalink | safeURL }}">
{{ end }}


<!-- pwas feature -->
{{- if .Site.Params.Features.pwa_apps -}}
    <meta name="pwa-feature" content="{{ .Site.Params.Features.pwa_apps }}">
    <meta name="theme-color" content="#317EFB">
    <link rel="manifest" href="/manifest.json">
{{- end -}}


<!-- math feature -->
{{- if .Page.Params.math -}}
    <meta name="math-feature" content="{{ .Page.Params.math }}">
{{ end }}
