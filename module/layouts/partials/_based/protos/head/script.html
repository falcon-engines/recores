<!-- script combining assets -->
{{ $base_jsx_critical :=  slice }}
{{ $page_jsx_critical :=  "" }}
{{ if and (.Scratch.Get "critical_jsx" ) }}
    {{ $page_jsx_critical  =  .Scratch.Get "critical_jsx"  }}
    {{ $base_jsx_critical  =  slice ( resources.Get "scripts/base.js" ) ( resources.Get $page_jsx_critical ) | resources.Concat "scripts/critical.js" }}
{{ else if and (.Scratch.Get "critical_jsx" ) ( hugo.IsProduction ) }}
    {{ $page_jsx_critical  =  .Scratch.Get "critical_jsx"  }}
    {{ $base_jsx_critical  =  slice ( resources.Get "scripts/base.js" ) ( resources.Get $page_jsx_critical ) | resources.Concat "scripts/critical.js"  |  minify }}
{{ else if hugo.IsProduction }}
    {{ $base_jsx_critical  =  resources.Get "scripts/base.js"   }}
{{ else }}
    {{- $base_jsx_critical =  resources.Get "scripts/base.js" | resources.Minify }}
{{ end }}

<script>{{- $base_jsx_critical.Content | safeJS  -}}</script>