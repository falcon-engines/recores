{{- $.Scratch.Add "index" slice -}}
{{- range .Site.Pages  -}}
    {{ if and ( ne .Section "api" ) ( ne .Title "Search" ) ( ne .IsHome true ) }}
        {{- $tags := .Params.tags  -}}
        {{- $cats := .Params.categories -}}
        {{- $desc := .Description -}}
        {{- $sect := .Section  -}}
        {{- $link := .Permalink | safeURL -}}
        {{- $name := .Title | lower | safeHTML -}}
        {{- $.Scratch.Add "index" ( dict "uri" $link "title" $name "description" $desc "keywords" $tags "categories" $cats "section" $sect ) -}}
    {{- end -}}
{{ end }}
{{- $.Scratch.Get "index" | jsonify -}}